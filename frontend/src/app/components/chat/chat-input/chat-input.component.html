
<div class="input-container">
    <div class="input-box">
        @if (chatService.editingMessageMode()) {
            <div class="modifing-message"> 
                <!-- <span> stai modificando questo messaggio </span> -->
            </div>
        }

        @if (chatService.allegatedLink) {
            <div class="link-wrapper">
                @switch (linkType(chatService.allegatedLink)) {
                    @case ('image') {
                        <img class="img_link" [src]="chatService.allegatedLink" alt="Image">
                    }
                    @case ('audio') {
                        <audio class="audio_link" [src]="chatService.allegatedLink" controls></audio>
                    }
                    @case ('video') {
                        <video class="video_link" width="500px" [src]="chatService.allegatedLink" controls></video>
                    }
                    @case ('link') {
                        <a class="a_link" [href]="chatService.allegatedLink" target="_blank" class="content"> {{ chatService.allegatedLink }} </a>
                    }
                }

                <button (click)="onDeleteAllegatedLink()"> X </button>
            </div>
        }

        <button [hidden]="chatService.editingMessageMode() === true" (click)="onAddLinkPopup()" class="input-button">
            <img class="input-icon" src="./assets/attachment.svg">
        </button>
        <button [hidden]="chatService.editingMessageMode() === false" (click)="onStopEditMessage()" class="input-button">
            <img class="input-icon" src="./assets/delete.svg">
        </button>

        <span #input_zone class="input" (keydown)="onKeydown($event)">

            @for (mess of newmessage; track $index) {
                <div style="height: 200px !important;" [id]="mess" [innerHTML]="mess" contenteditable="true" class="input"></div>
                <!-- <textarea #text_area [innerHTML]="mess" [id]="mess" (keydown)="onKeydown($event)" (submit)="onSendMessage()" contenteditable="true" placeholder="Scrivi un messaggio.." class="input" name="text" rows="14" cols="10" wrap="soft" maxlength="1000"></textarea> -->
            }
            
        </span>

        <button class="input-button" (click)="onSendMessage()">
            <img class="input-icon" src="./assets/send.svg">
        </button>
    </div>
</div>
