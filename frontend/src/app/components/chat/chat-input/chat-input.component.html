
<div class="input-container" #input_container (keydown)="onKeydown($event)">
    <div class="input-box" #input_box>
        @if (chatService.editingMessageMode()) {
            <div [ngStyle]="{'bottom': heightWidgetEdit_Attachment}" class="modifing-message"> 
                <span> stai modificando questo messaggio </span>
            </div>
        }

        @if (chatService.allegatedLink) {
            <div class="link-wrapper" [ngStyle]="{'bottom': heightWidgetEdit_Attachment}">
                @switch (linkType(chatService.allegatedLink)) {
                    @case ('image') {
                        <img class="img_link" [src]="chatService.allegatedLink" alt="Image">
                    }
                    @case ('audio') {
                        <audio class="audio_link" [src]="chatService.allegatedLink" controls></audio>
                    }
                    @case ('video') {
                        <video class="video_link" width="500px" [src]="chatService.allegatedLink" controls></video>
                    }
                    @case ('link') {
                        <a class="a_link" [href]="chatService.allegatedLink" target="_blank" class="content"> {{ chatService.allegatedLink }} </a>
                    }
                }

                <button (click)="onDeleteAllegatedLink()"> X </button>
            </div>
        }

        <button [hidden]="chatService.editingMessageMode() === true" (click)="onAddLinkPopup()" class="input-button">
            <img class="input-icon" src="./assets/attachment.svg">
        </button>
        <button [hidden]="chatService.editingMessageMode() === false" (click)="onStopEditMessage()" class="input-button">
            <img class="input-icon" src="./assets/delete.svg">
        </button>

        <!-- <textarea #text_area contenteditable="true" placeholder="Scrivi un messaggio.." class="input" name="text" rows="14" cols="10" wrap="soft" maxlength="1000"></textarea> -->
        <div #text_area [innerHTML]="text_area_innerHTML" contenteditable="true" class="input"></div>
        <button class="input-button" (click)="onSendMessage()">
            <img class="input-icon" src="./assets/send.svg">
        </button>
    </div>
</div>
